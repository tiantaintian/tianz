webpackJsonp([37],{24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(152);t["default"]=a.Col,e.exports=t["default"]},25:88,481:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.remove=t.create=t.query=t.find=void 0;var u=n(150),s=r(u),i=n(36),o=r(i),l=n(153),c=r(l),d=(t.find=function(){var e=(0,c["default"])(o["default"].mark(function t(e){return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.read_Token(f.APIHost+"/systemSmg/"+e,f.getAuth("/systemSmg/"+e)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.query=function(){var e=(0,c["default"])(o["default"].mark(function t(e){var n;return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.page||(e.page=1),e.pageSize||(e.pageSize=10),!e.field){t.next=6;break}return n={},n[e.field]=e.keyword,t.abrupt("return",f.creat_Token(f.APIHost+"/systemSmg/search/"+e.page+"/"+e.pageSize,(0,s["default"])(n),f.getAuth("/systemSmg/search/"+e.page+"/"+e.pageSize)).then(function(e){return e.json()}).then(function(e){return e}));case 6:return t.abrupt("return",f.read_Token(f.APIHost+"/systemSmg/list/"+e.page+"/"+e.pageSize,f.getAuth("/systemSmg/list/"+e.page+"/"+e.pageSize)).then(function(e){return e.json()}).then(function(e){return e}));case 7:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.create=function(){var e=(0,c["default"])(o["default"].mark(function t(e){return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.creat_Token(f.APIHost+"/systemSmg",f.getAuth("/systemSmg"),(0,s["default"])(e)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.remove=function(){var e=(0,c["default"])(o["default"].mark(function t(e){return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.delete_Token(f.APIHost+"/systemSmg/"+e,f.getAuth("/systemSmg/"+e)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,c["default"])(o["default"].mark(function t(e){return o["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.update_Token(f.APIHost+"/systemSmg/"+e.id,f.getAuth("/systemSmg/"+e.id),(0,s["default"])(e.data)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),n(66),n(23)),f=a(d)},741:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),u=a(r),s=n(36),i=a(s),o=n(481);n(149);t["default"]={namespace:"smg",state:{list:[],smg:{},loading:!1,currentItem:{},modalVisible:!1,modalType:"create",pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171 "+e+" \u6761"},current:1,total:null}},subscriptions:{setup:function(e){var t=e.dispatch,n=e.history;n.listen(function(e){"/smg/addSmg"===e.pathname&&t(e.query.index?{type:"find",payload:e.query.index}:{type:"findSuccess",payload:{smg:{}}})})}},effects:{find:i["default"].mark(function l(e,t){var n,a=e.payload,r=t.call,u=t.put;return i["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"showLoading"});case 2:return e.next=4,r(o.find,a);case 4:if(n=e.sent,107!=n.statusCode){e.next=8;break}return e.next=8,u({type:"findSuccess",payload:{smg:n.resource}});case 8:case"end":return e.stop()}},l,this)}),"delete":i["default"].mark(function c(e,t){var n,a=e.payload,r=t.call,u=t.put;return i["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"showLoading"});case 2:return e.next=4,r(o.remove,a._id);case 4:if(n=e.sent,103!=n.statusCode){e.next=8;break}return e.next=8,u({type:"delSuccess",payload:{id:a.id}});case 8:case"end":return e.stop()}},c,this)}),create:i["default"].mark(function d(e,t){var n,a=e.payload,r=t.call,u=t.put;return i["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"hideModal"});case 2:return e.next=4,u({type:"showLoading"});case 4:return e.next=6,r(o.create,a.data);case 6:if(n=e.sent,101!=n.statusCode){e.next=10;break}return e.next=10,u({type:"createSuccess",payload:{data:n.resource,pagination:{total:n.resource.length,current:1}}});case 10:case"end":return e.stop()}},d,this)}),update:i["default"].mark(function f(e,t){var n,a=e.payload,r=t.call,u=t.put;return i["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"hideModal"});case 2:return e.next=4,u({type:"showLoading"});case 4:return e.next=6,r(o.update,a);case 6:if(n=e.sent,105!=n.statusCode){e.next=10;break}return e.next=10,u({type:"updateSuccess",payload:a});case 10:case"end":return e.stop()}},f,this)}),uploadImage:i["default"].mark(function p(e,t){var n,a=e.payload,r=t.call,u=t.put;return i["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(uploadImageAct,a);case 2:if(n=e.sent,105!=n.statusCode){e.next=6;break}return e.next=6,u({type:"uploadImageSuccess",payload:n});case 6:case"end":return e.stop()}},p,this)})},reducers:{getProduct:function(e,t){return(0,u["default"])({},e,t.payload)},showLoading:function(e){return(0,u["default"])({},e,{loading:!0})},querySuccess:function(e,t){var n=t.payload,a=n.list,r=n.pagination;return(0,u["default"])({},e,{list:a,loading:!1,pagination:(0,u["default"])({},e.pagination,r)})},findSuccess:function(e,t){return(0,u["default"])({},e,t.payload)},createSuccess:function(e,t){var n=t.payload,a=n.data,r=n.pagination,s=e.list;return s.splice(0,0,a),(0,u["default"])({},e,{list:s,loading:!1,pagination:(0,u["default"])({},e.pagination,r)})},delSuccess:function(e,t){var n=t.payload.id,a=e.list;return a.splice(n,1),(0,u["default"])({},e,{list:a,loading:!1})},updateSuccess:function(e,t){var n=t.payload,a=n.key,r=n.smg,s=e.list,i=(0,u["default"])({},s[a],r);return s.splice(a,1,i),(0,u["default"])({},e,{list:s,loading:!1})},showModal:function(e,t){return(0,u["default"])({},e,t.payload,{modalVisible:!0})},hideModal:function(e){return(0,u["default"])({},e,{modalVisible:!1})},uploadImageSuccess:function(e,t){}}},e.exports=t["default"]},775:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.smg;return{smg:t}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(14),s=a(u),i=n(87),o=a(i),l=n(90),c=a(l),d=n(24),f=a(d),p=n(52),g=a(p),m=n(2),h=a(m),y=n(4),v=a(y),x=n(3),w=a(x);n(17),n(88),n(19),n(25),n(53);var S=n(1),k=a(S),b=n(136),_=n(109),A=n(481),E=function(e){function t(){return(0,h["default"])(this,t),(0,v["default"])(this,e.apply(this,arguments))}return(0,w["default"])(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.smg;t.smg.title?this.refs.title.refs.input.value=t.smg.title:"",t.smg.content?this.refs.content.refs.input.value=t.smg.content:""},t.prototype.onSubmit=function(){var e=this.props,t=e.smg,n=e.dispatch;if(!this.refs.title.refs.input.value)return void g["default"].warning("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01");if(!this.refs.content.refs.input.value)return void g["default"].warning("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\uff01");var a={title:this.refs.title.refs.input.value,content:this.refs.content.refs.input.value};t.smg._id?(0,A.update)({id:t.smg._id,data:a}).then(function(e){105==e.statusCode?(g["default"].info(e.message),n(_.routerRedux.goBack())):g["default"].error(e.message)}):(0,A.create)(a).then(function(e){101==e.statusCode?(g["default"].info(e.message),n(_.routerRedux.push({pathname:"/smg/smgs"}))):g["default"].error(e.message)})},t.prototype.render=function(){var e=this.props.users;return console.log(e),k["default"].createElement("div",{className:"content-inner"},k["default"].createElement(o["default"],{gutter:16,style:{marginTop:20}},k["default"].createElement(f["default"],{span:8,style:{textAlign:"right",paddingTop:6}},k["default"].createElement("h4",null,"\u516c\u544a\u6807\u9898",k["default"].createElement("font",{color:"red"},"*"))),k["default"].createElement(f["default"],{span:8},k["default"].createElement(c["default"],{size:"large",style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u516c\u544a\u6807\u9898",ref:"title"}))),k["default"].createElement(o["default"],{gutter:16,style:{marginTop:20}},k["default"].createElement(f["default"],{span:8,style:{textAlign:"right",paddingTop:6}},k["default"].createElement("h4",null,"\u516c\u544a\u5185\u5bb9")),k["default"].createElement(f["default"],{span:8},k["default"].createElement(c["default"],{size:"large",rows:4,style:{width:"100%"},ref:"content",placeholder:"\u8bf7\u8f93\u5165\u516c\u544a\u5185\u5bb9"}))),k["default"].createElement(o["default"],{type:"flex",justify:"center",gutter:16,style:{marginTop:30}},k["default"].createElement(f["default"],{span:3},k["default"].createElement(s["default"],{style:{width:"100%"},size:"large",type:"primary",onClick:this.onSubmit.bind(this)},"\u63d0\u4ea4"))))},t}(S.Component);t["default"]=(0,b.connect)(r)(E),e.exports=t["default"]}});