webpackJsonp([44],{24:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(152);t["default"]=n.Col,e.exports=t["default"]},25:88,255:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadImageAct=t.update=t.remove=t.create=t.query=t.createGg=t.queryPay=t.updatePayImg=t.findPay=t.find=void 0;var u=r(150),s=a(u),o=r(36),i=a(o),c=r(153),l=a(c),d=(t.find=function(){var e=(0,l["default"])(i["default"].mark(function t(e){return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.read_Token(p.APIHost+"/crops/"+e,p.getAuth("/crops/"+e)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.findPay=function(){var e=(0,l["default"])(i["default"].mark(function t(e){return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.read_Token(p.APIHost+"/payImg/"+e,p.getAuth("/payImg/"+e)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.updatePayImg=function(){var e=(0,l["default"])(i["default"].mark(function t(e){return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.update_Token(p.APIHost+"/payImg/"+e.id,p.getAuth("/payImg/"+e.id),(0,s["default"])(e.data)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryPay=function(){var e=(0,l["default"])(i["default"].mark(function t(e){var r;return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.page||(e.page=1),e.pageSize||(e.pageSize=10),!e.field){t.next=6;break}return r={},r[e.field]=e.keyword,t.abrupt("return",p.create(p.APIHost+"/crops/search/"+e.page+"/"+e.pageSize,(0,s["default"])(r)).then(function(e){return e.json()}).then(function(e){return e}));case 6:return t.abrupt("return",p.read_Token(p.APIHost+"/payImg/list",p.getAuth("/payImg/list")).then(function(e){return e.json()}).then(function(e){return e}));case 7:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.createGg=function(){var e=(0,l["default"])(i["default"].mark(function t(e){return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.creat_Token(p.APIHost+"/crops/addGg",p.getAuth("/crops/addGg"),(0,s["default"])(e)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.query=function(){var e=(0,l["default"])(i["default"].mark(function t(e){var r;return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.page||(e.page=1),e.pageSize||(e.pageSize=10),!e.field){t.next=6;break}return r={},r[e.field]=e.keyword,t.abrupt("return",p.create(p.APIHost+"/crops/search/"+e.page+"/"+e.pageSize,(0,s["default"])(r)).then(function(e){return e.json()}).then(function(e){return e}));case 6:return t.abrupt("return",p.read_Token(p.APIHost+"/crops/list",p.getAuth("/crops/list")).then(function(e){return e.json()}).then(function(e){return e}));case 7:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.create=function(){var e=(0,l["default"])(i["default"].mark(function t(e){return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.creat_Token(p.APIHost+"/crops",p.getAuth("/crops"),(0,s["default"])(e)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.remove=function(){var e=(0,l["default"])(i["default"].mark(function t(e){return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.delete_Token(p.APIHost+"/crops/"+e,p.getAuth("/crops/"+e)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,l["default"])(i["default"].mark(function t(e){return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.update_Token(p.APIHost+"/crops/"+e.id,p.getAuth("/crops/"+e.id),(0,s["default"])(e.data)).then(function(e){return e.json()}).then(function(e){return e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.uploadImageAct=function(){var e=(0,l["default"])(i["default"].mark(function t(e){var r;return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.APIHost+"/file",t.abrupt("return",p.uploadImg_Token(r,e).then(function(e){return e.json()}).then(function(e){return e}));case 2:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),r(66),r(23)),p=n(d)},272:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(5),u=n(a),s=r(36),o=n(s),i=r(255),c=r(149);t["default"]={namespace:"crops",state:{list:[],product:{},loading:!1,currentItem:{},modalVisible:!1,modalType:"create",pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171 "+e+" \u6761"},current:1,total:null}},subscriptions:{setup:function(e){var t=e.dispatch,r=e.history;r.listen(function(e){"/product/cropsList"===e.pathname?t({type:"query",payload:e.query}):"/product/crops"===e.pathname?t(e.query.index?{type:"find",payload:e.query.index}:{type:"findSuccess",payload:{product:{}}}):"/order/payImgList"===e.pathname?t({type:"queryPay",payload:e.query}):"/order/addPayImg"===e.pathname&&t(e.query.index?{type:"findPay",payload:e.query.index}:{type:"findSuccess",payload:{product:{}}})})}},effects:{query:o["default"].mark(function l(e,t){var r,n,a=e.payload,u=t.call,s=t.put;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({type:"showLoading"});case 2:return e.next=4,u(i.query,(0,c.parse)(a));case 4:if(r=e.sent,n=1,a.page&&(n=parseInt(a.page)),107!=r.statusCode){e.next=10;break}return e.next=10,s({type:"querySuccess",payload:{list:r.resource,pagination:{total:r.sum,current:n}}});case 10:case"end":return e.stop()}},l,this)}),queryPay:o["default"].mark(function d(e,t){var r,n,a=e.payload,u=t.call,s=t.put;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({type:"showLoading"});case 2:return e.next=4,u(i.queryPay,(0,c.parse)(a));case 4:if(r=e.sent,n=1,a.page&&(n=parseInt(a.page)),107!=r.statusCode){e.next=12;break}return e.next=10,s({type:"querySuccess",payload:{list:r.resource,pagination:{total:r.sum,current:n}}});case 10:e.next=15;break;case 12:return 403==r.statusCode?message.error("\u6743\u9650\u4e0d\u8db3"):message.error(r.message),e.next=15,s({type:"hideLoading"});case 15:case"end":return e.stop()}},d,this)}),findPay:o["default"].mark(function p(e,t){var r,n=e.payload,a=t.call,u=t.put;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"showLoading"});case 2:return e.next=4,a(i.findPay,n);case 4:if(r=e.sent,107!=r.statusCode){e.next=10;break}return e.next=8,u({type:"findSuccess",payload:{product:r.resource}});case 8:e.next=13;break;case 10:return 403==r.statusCode?message.error("\u6743\u9650\u4e0d\u8db3"):message.error(r.message),e.next=13,u({type:"hideLoading"});case 13:case"end":return e.stop()}},p,this)}),find:o["default"].mark(function f(e,t){var r,n=e.payload,a=t.call,u=t.put;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"showLoading"});case 2:return e.next=4,a(i.find,n);case 4:if(r=e.sent,107!=r.statusCode){e.next=8;break}return e.next=8,u({type:"findSuccess",payload:{product:r.resource}});case 8:case"end":return e.stop()}},f,this)}),"delete":o["default"].mark(function h(e,t){var r,n=e.payload,a=t.call,u=t.put;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"showLoading"});case 2:return e.next=4,a(i.remove,n._id);case 4:if(r=e.sent,103!=r.statusCode){e.next=8;break}return e.next=8,u({type:"delSuccess",payload:{id:n.id}});case 8:case"end":return e.stop()}},h,this)}),create:o["default"].mark(function m(e,t){var r,n=e.payload,a=t.call,u=t.put;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"hideModal"});case 2:return e.next=4,u({type:"showLoading"});case 4:return e.next=6,a(i.create,n.data);case 6:if(r=e.sent,101!=r.statusCode){e.next=10;break}return e.next=10,u({type:"createSuccess",payload:{data:r.resource,pagination:{total:r.resource.length,current:1}}});case 10:case"end":return e.stop()}},m,this)}),update:o["default"].mark(function g(e,t){var r,n=e.payload,a=t.call,u=t.put;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"hideModal"});case 2:return e.next=4,u({type:"showLoading"});case 4:return e.next=6,a(i.update,n);case 6:if(r=e.sent,105!=r.statusCode){e.next=10;break}return e.next=10,u({type:"updateSuccess",payload:n});case 10:case"end":return e.stop()}},g,this)}),uploadImage:o["default"].mark(function y(e,t){var r,n=e.payload,a=t.call,u=t.put;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(i.uploadImageAct,n);case 2:if(r=e.sent,105!=r.statusCode){e.next=6;break}return e.next=6,u({type:"uploadImageSuccess",payload:r});case 6:case"end":return e.stop()}},y,this)})},reducers:{getProduct:function(e,t){return(0,u["default"])({},e,t.payload)},showLoading:function(e){return(0,u["default"])({},e,{loading:!0})},querySuccess:function(e,t){var r=t.payload,n=r.list,a=r.pagination;return(0,u["default"])({},e,{list:n,loading:!1,pagination:(0,u["default"])({},e.pagination,a)})},findSuccess:function(e,t){return(0,u["default"])({},e,t.payload)},createSuccess:function(e,t){var r=t.payload,n=r.data,a=r.pagination,s=e.list;return s.splice(0,0,n),(0,u["default"])({},e,{list:s,loading:!1,pagination:(0,u["default"])({},e.pagination,a)})},delSuccess:function(e,t){var r=t.payload.id,n=e.list;return n.splice(r,1),(0,u["default"])({},e,{list:n,loading:!1})},updateSuccess:function(e,t){var r=t.payload,n=r.key,a=r.user,s=e.list,o=(0,u["default"])({},s[n],a);return s.splice(n,1,o),(0,u["default"])({},e,{list:s,loading:!1})},showModal:function(e,t){return(0,u["default"])({},e,t.payload,{modalVisible:!0})},hideModal:function(e){return(0,u["default"])({},e,{modalVisible:!1})},uploadImageSuccess:function(e,t){}}},e.exports=t["default"]},745:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.crops;return{crops:t}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(14),s=n(u),o=r(87),i=n(o),c=r(90),l=n(c),d=r(24),p=n(d),f=r(52),h=n(f),m=r(2),g=n(m),y=r(4),v=n(y),x=r(3),k=n(x);r(17),r(88),r(19),r(25),r(53);var w=r(1),b=n(w),E=r(136),I=r(255),P=r(109),A=r(23),S=function(e){function t(){var r,n,a;(0,g["default"])(this,t);for(var u=arguments.length,s=Array(u),o=0;o<u;o++)s[o]=arguments[o];return r=n=(0,v["default"])(this,e.call.apply(e,[this].concat(s))),n.state={imgUrl:""},a=r,(0,v["default"])(n,a)}return(0,k["default"])(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.crops;this.setState({imgUrl:t.product.img?t.product.img:""}),t.product.name?this.refs.name.refs.input.value=t.product.name:"";var r=this,n=setTimeout(function(){3==t.product.type&&(r.refs.bank.refs.input.value=t.product.bank?t.product.bank:"",r.refs.bankCard.refs.input.value=t.product.bankCard?t.product.bankCard:"",r.refs.bankUser.refs.input.value=t.product.bankUser?t.product.bankUser:""),clearTimeout(n)},100)},t.prototype.onChange=function(e,t,r){this.setState({value:e})},t.prototype.getLocalImg=function(e){var t=this,r=new FormData;r.append("Filename",e.target.files[0].name),r.append("imgFile",e.target.files[0]),(0,I.uploadImageAct)(r).then(function(e){0==e.error&&t.setState({imgUrl:e.url})})},t.prototype.onSubmit=function(){var e=this.props,t=e.crops,r=e.dispatch;if(!this.refs.name.refs.input.value)return void h["default"].warning("\u8bf7\u8f93\u5165\u540d\u79f0");if(3==t.product.type&&!this.refs.bank.refs.input.value)return void h["default"].warning("\u8bf7\u8f93\u5165\u94f6\u884c\u540d\u79f0");if(3==t.product.type&&!this.refs.bankCard.refs.input.value)return void h["default"].warning("\u8bf7\u8f93\u5165\u94f6\u884c\u5361");if(3==t.product.type&&!this.refs.bankUser.refs.input.value)return void h["default"].warning("\u8bf7\u8f93\u5165\u771f\u5b9e\u59d3\u540d");var n={name:this.refs.name.refs.input.value,img:this.state.imgUrl,thumbnail:this.state.imgUrl};3==t.product.type&&(n.bank=this.refs.bank.refs.input.value,n.bankCard=this.refs.bankCard.refs.input.value,n.bankUser=this.refs.bankUser.refs.input.value),t.product._id?(0,I.updatePayImg)({id:t.product._id,data:n}).then(function(e){105==e.statusCode?(h["default"].info(e.message),r(P.routerRedux.goBack())):h["default"].error(e.message)}):(0,I.createGg)(n).then(function(e){101==e.statusCode?(h["default"].info(e.message),r(P.routerRedux.push({pathname:"/product/bannerList"}))):h["default"].error(e.message)})},t.prototype.changevolume=function(e){this.setState({volume:e})},t.prototype.switchOnRecom=function(e){e?this.setState({onRecom:1}):this.setState({onRecom:0})},t.prototype.render=function(){var e=this.props.crops;return b["default"].createElement("div",{className:"content-inner"},b["default"].createElement(i["default"],{gutter:16,style:{marginTop:20}},b["default"].createElement(p["default"],{span:8,style:{textAlign:"right",paddingTop:6}},b["default"].createElement("h4",null,"\u540d\u79f0",b["default"].createElement("font",{color:"red"},"*"))),b["default"].createElement(p["default"],{span:8},b["default"].createElement(l["default"],{size:"large",style:{width:"100%"},placeholder:"\u540d\u79f0",ref:"name"}))),b["default"].createElement(i["default"],{gutter:16,style:{marginTop:20}},b["default"].createElement(p["default"],{span:8,style:{textAlign:"right",paddingTop:6}},b["default"].createElement("h4",null,"\u56fe\u7247")),b["default"].createElement(p["default"],{span:8},b["default"].createElement("form",{id:"uploadForm"},b["default"].createElement("h4",{className:"clearMargin"},b["default"].createElement("style",null,"\n                      .fengmianDiv{\n                        width: 246px;\n                        height: 130px;\n                      }\n                      .fengmianDiv input{ display:none;}\n                      .fengmianDiv img{ width: 110px; height: 130px;}\n                    "),b["default"].createElement("label",{className:"fengmianDiv"},b["default"].createElement("input",{type:"file",onChange:this.getLocalImg.bind(this)}),b["default"].createElement("img",{className:"id_card",ref:"cover",name:"enter_imgsPath",src:A.APIHost+this.state.imgUrl})))))),3==e.product.type?b["default"].createElement(i["default"],{gutter:16,style:{marginTop:20}},b["default"].createElement(p["default"],{span:8,style:{textAlign:"right",paddingTop:6}},b["default"].createElement("h4",null,"\u94f6\u884c\u540d\u79f0",b["default"].createElement("font",{color:"red"},"*"))),b["default"].createElement(p["default"],{span:8},b["default"].createElement(l["default"],{size:"large",style:{width:"100%"},placeholder:"\u94f6\u884c\u540d\u79f0",ref:"bank"}))):"",3==e.product.type?b["default"].createElement(i["default"],{gutter:16,style:{marginTop:20}},b["default"].createElement(p["default"],{span:8,style:{textAlign:"right",paddingTop:6}},b["default"].createElement("h4",null,"\u94f6\u884c\u5361\u53f7",b["default"].createElement("font",{color:"red"},"*"))),b["default"].createElement(p["default"],{span:8},b["default"].createElement(l["default"],{size:"large",style:{width:"100%"},placeholder:"\u94f6\u884c\u5361\u53f7",ref:"bankCard"}))):"",3==e.product.type?b["default"].createElement(i["default"],{gutter:16,style:{marginTop:20}},b["default"].createElement(p["default"],{span:8,style:{textAlign:"right",paddingTop:6}},b["default"].createElement("h4",null,"\u771f\u5b9e\u59d3\u540d",b["default"].createElement("font",{color:"red"},"*"))),b["default"].createElement(p["default"],{span:8},b["default"].createElement(l["default"],{size:"large",style:{width:"100%"},placeholder:"\u771f\u5b9e\u59d3\u540d",ref:"bankUser"}))):"",b["default"].createElement(i["default"],{type:"flex",justify:"center",gutter:16,style:{marginTop:30}},b["default"].createElement(p["default"],{span:3},b["default"].createElement(s["default"],{style:{width:"100%"},size:"large",type:"primary",onClick:this.onSubmit.bind(this)},"\u63d0\u4ea4"))))},t}(w.Component);t["default"]=(0,E.connect)(a)(S),e.exports=t["default"]}});